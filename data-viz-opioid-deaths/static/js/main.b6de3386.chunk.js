(this["webpackJsonpdata-viz-challenge"]=this["webpackJsonpdata-viz-challenge"]||[]).push([[0],{19:function(e,t,a){e.exports=a.p+"static/media/GBD_2017_death_rate_opioid_use_disorders_all_ages.122c5bb1.csv"},30:function(e,t,a){e.exports=a(43)},35:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){},40:function(e,t,a){},41:function(e,t,a){},42:function(e,t,a){},43:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(17),c=a.n(o),l=(a(35),a(2)),i=a(12),u=a.n(i),s=a(18),f=a(4),m=a(19),p=a.n(m),d=a(1),b=function(){return r.a.createElement("header",null,r.a.createElement("h2",null,"Population Most Affected by Opioid Disorders"))},h=(a(37),function(e){var t=e.activeButton,a=e.onButtonChange,n=e.buttonName;return r.a.createElement("button",{className:function(e){return"nav-button ".concat(t===e?"selected":"")}(n),onClick:function(e){return a(n)}},n)}),v=(a(38),function(e){var t=e.activeButton,a=e.onButtonChange;return r.a.createElement("nav",{className:"nav"},r.a.createElement(h,{activeButton:t,onButtonChange:a,buttonName:"View by number of deaths"}),r.a.createElement(h,{activeButton:t,onButtonChange:a,buttonName:"View by location"}))}),E=a(20),g=(a(39),function(e){var t=e.selected,a=d.g(",.1f"),n=d.f(Object(l.a)(new Set(t.years)));return r.a.createElement("foreignObject",{x:t.x-40,y:t.y-200,width:125,height:100},r.a.createElement("div",{className:"tooltip"},r.a.createElement("h6",null,t.location),r.a.createElement("ul",{className:"tip-data"},r.a.createElement("li",null,"Mean: ",a(t.bothMean)),r.a.createElement("li",null,"Female: ",a(t.femaleMean)),r.a.createElement("li",null,"Male: ",a(t.maleMean)),r.a.createElement("li",null,"Years: ",n[0]," - ",n[1]))))});a(40);function O(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,n)}return a}var j=function(e){var t=e.chartData,a=Object(n.useState)(null),o=Object(f.a)(a,2),c=o[0],l=o[1],i=Object(n.useRef)();return Object(n.useEffect)((function(){d.k("#chartGroup").remove(),function(e){var t=d.k(i.current).append("g").attr("transform","translate(0,0)").attr("id","chartGroup"),a=d.j().domain([0,d.h(e,(function(e){return e.bothUpper}))]).clamp(!0).nice().range([200,920]),n=d.i().domain(e.map((function(e){return e.location}))).range([80,3420]).padding(.05);t.append("g").attr("transform","translate(0, ".concat(3420,")")).attr("class","axis").call(d.a(a).ticks(25,",f")),t.append("g").attr("transform","translate(0, ".concat(80,")")).attr("class","axis").call(d.c(a).ticks(25,",f")),t.append("g").attr("transform","translate(".concat(200,", 0)")).attr("class","axis").call(d.b(n)),t.append("text").attr("transform","translate(".concat(560,", ").concat(40,")")).attr("class","x-labels").style("text-anchor","middle").text("Number of deaths per 100,000 people"),t.append("text").attr("transform","translate(".concat(560,", ").concat(3460,")")).attr("class","x-labels").style("text-anchor","middle").text("Number of deaths per 100,000 people"),t.append("g").selectAll("rect").data(e).join("rect").attr("width",(function(e){return a(e.bothMean)-200})).attr("height",n.bandwidth()).attr("fill","lightgray").attr("x",201).attr("y",(function(e){return n(e.location)})).on("mouseover",(function(e){var t=d.e.pageX,a=d.e.pageY;l(function(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?O(a,!0).forEach((function(t){Object(E.a)(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):O(a).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}({},e,{x:t,y:a}))})).on("mouseout",(function(e){return l(null)})),t.append("g").selectAll("line").data(e).join("line").attr("x1",(function(e){return a(e.bothLower)})).attr("x2",(function(e){return a(e.bothUpper)})).attr("y1",(function(e){return n(e.location)+n.bandwidth()/2})).attr("y2",(function(e){return n(e.location)+n.bandwidth()/2})).attr("stroke","#667580").attr("stroke-width","2px").attr("stroke-linecap","round")}(t)}),[t]),r.a.createElement("svg",{className:"svgChart",width:1e3,height:3500,ref:i,viewBox:"0 0 ".concat(1e3," ").concat(3500),preserveAspectRatio:"xMidYMid meet"},c&&r.a.createElement(g,{selected:c}))},w=(a(41),function(e){var t=e.yearRangeAll;return r.a.createElement("div",{className:"div-description"},r.a.createElement("h3",null,"Chart Information"),r.a.createElement("h4",null,"Data sources:"),r.a.createElement("ul",{className:"description-title"},r.a.createElement("li",null,"Global Burden of Disease Collaborative Network."),r.a.createElement("li",null,"Global Burden of Disease Study 2017 (GBD 2017) Results."),r.a.createElement("li",null,"Seattle, United States: Institute for Health Metrics and Evaluation (IHME), 2018."),r.a.createElement("li",null,r.a.createElement("a",{href:"http://ghdx.healthdata.org/gbd-results-tool"},"Available from healthdata.org"),"."),r.a.createElement("li",null,r.a.createElement("a",{href:"http://ghdx.healthdata.org/gbd-results-tool?params=gbd-api-2017-permalink/c12b65baf872c661f4640bb583320b4e"},"Permalink to opioid use disorder data"),".")),r.a.createElement("h4",null,"Assumptions:"),r.a.createElement("ul",{className:"description-title"},r.a.createElement("li",null,"Population is defined as inhabitants of a country."),r.a.createElement("li",null,"Opioid deaths are shown as number of opioid deaths per 100,000 deaths, cumulative for the period ",t[0]," - ",t[1],"."),r.a.createElement("li",null,"Mean number of deaths for both sexes is plotted along with upper and lower uncertainty boundaries as error bars."),r.a.createElement("li",null,"Data specific to males and females is shown when data points are hovered over.")))}),y=function(e,t){return e.bothMean>t.bothMean?-1:e.bothMean<t.bothMean?1:0},x=function(e,t){return e.location>t.location?1:e.location<t.location?-1:0},M=function(e){var t=e.reduce((function(e,t){return e[t.location]?e[t.location]=[].concat(Object(l.a)(e[t.location]),[t]):e[t.location]=[t],e}),{});return Object.values(t).map((function(e){return e.reduce((function(e,t){var a=t.location,n=t.sex,r=t.mean,o=t.upper,c=t.lower,i=parseFloat(r),u=parseFloat(o),s=parseFloat(c);return e.location=a||"","Male"===n?(e.maleMean=(e.maleMean||0)+i,e.maleUpper=(e.maleUpper||0)+u,e.maleLower=(e.maleLower||0)+s):"Female"===n?(e.femaleMean=(e.femaleMean||0)+i,e.femaleUpper=(e.femaleUpper||0)+u,e.femaleLower=(e.femaleLower||0)+s):"Both"===n&&(e.bothMean=(e.bothMean||0)+i,e.bothUpper=(e.bothUpper||0)+u,e.bothLower=(e.bothLower||0)+s),e.years=[].concat(Object(l.a)(e.years||[]),[t.year]),e}),{})}))},N=(a(42),function(){var e=Object(n.useState)([]),t=Object(f.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(""),i=Object(f.a)(c,2),m=i[0],h=i[1],E=function(){var e=Object(s.a)(u.a.mark((function e(t){var a,n;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Object(d.d)(t);case 3:a=e.sent,n=M(a),o(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),h("There was an error processing the csv file.");case 11:case 12:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(t){return e.apply(this,arguments)}}();Object(n.useEffect)((function(){E(p.a)}),[]);var g=Object(n.useState)(a.sort(y)),O=Object(f.a)(g,2),N=O[0],k=O[1],B=Object(n.useState)("View by number of deaths"),D=Object(f.a)(B,2),S=D[0],P=D[1];Object(n.useEffect)((function(){var e=function(e){return[Object(l.a)(e).sort(y),Object(l.a)(e).sort(x)]}(a);k("View by number of deaths"===S?e[0]:e[1])}),[a,k,S]);var A=function(e){var t=e.reduce((function(e,t){return[].concat(Object(l.a)(e),Object(l.a)(t.years))}),[]),a=Object(l.a)(new Set(t));return Object(d.f)(a)}(a);return r.a.createElement("div",{className:"App"},r.a.createElement(b,null),m?r.a.createElement("div",{className:"error"},m):"",r.a.createElement(v,{activeButton:S,onButtonChange:function(e){P(e)}}),r.a.createElement("main",{className:"main-content"},r.a.createElement(j,{chartData:N})),r.a.createElement(w,{yearRangeAll:A}))});c.a.render(r.a.createElement(N,null),document.querySelector("#root"))}},[[30,1,2]]]);
//# sourceMappingURL=main.b6de3386.chunk.js.map