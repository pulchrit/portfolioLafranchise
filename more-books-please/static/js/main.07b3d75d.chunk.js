(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{23:function(e,t,a){e.exports=a(39)},28:function(e,t,a){},29:function(e,t,a){},34:function(e,t,a){},35:function(e,t,a){},36:function(e,t,a){},37:function(e,t,a){},38:function(e,t,a){},39:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),o=a(20),s=a.n(o),c=a(6),i=(a(28),a(7)),l=a(8),m=a(10),u=a(9),p=a(11),h=a(5);a(29);function f(){return r.a.createElement("header",{className:"header"},r.a.createElement(c.b,{to:"/",className:"headline"},"More Books, Please"))}a(34);var b=function(e){function t(){return Object(i.a)(this,t),Object(m.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.error,t=this.props.listNames.map(function(e,t){return r.a.createElement("button",{className:"list-button",key:t},r.a.createElement(c.b,{to:"/topBooks/".concat(e.list_name_encoded)},e.display_name))});return r.a.createElement("section",{className:"best-sellers-list-options"},e?r.a.createElement("p",{className:"error",role:"alert"},e.message):"",r.a.createElement("h2",{className:"subhead"},"Find more food for your hungry little bookworms."),r.a.createElement("p",{className:"directions"},"Choose from The New York Times Bestsellers Lists below to see the most recent best sellers in each children's book list."),t)}}]),t}(r.a.Component),y=(a(35),function(e){var t=e.rank,a=e.title,n=e.author,o=e.description,s=e.image,c=e.url;return r.a.createElement("section",{className:"book-card"},r.a.createElement("img",{className:"book-cover",src:s,alt:"".concat(a," by ").concat(n)}),r.a.createElement("p",{className:"book-details"},"Number: ".concat(t)),r.a.createElement("p",{className:"book-details"},a),r.a.createElement("p",{className:"book-details"},"By ".concat(n)),r.a.createElement("p",{className:"book-details"},o),r.a.createElement("a",{className:"find-link",href:c},"Find this book"))}),d="Yand1aprt9S5jUaW5ScVMizlGJVsJJim",k=function(e){if(!e.ok)throw new Error("Something went wrong.");return e},E=(a(36),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={topBooksByList:{display_name:"",books:[]},error:null},a.reviseTopBooksByList=function(e,t){var a=Object.keys(e).map(function(t){return{isbn:t.slice(5),info_url:e[t].info_url}});return t.books.forEach(function(e){a.forEach(function(t){t.isbn===e.primary_isbn10&&(e.open_library_url=t.info_url)})}),t},a.getOpenLibraryUrls=function(e){var t=e.books.map(function(e){return"ISBN:".concat(e.primary_isbn10)}).join(","),n="".concat("https://openlibrary.org/api/books?bibkeys=").concat(t,"&format=json");fetch(n).then(k).then(function(e){return e.json()}).then(function(t){return a.reviseTopBooksByList(t,e)}).then(function(e){return a.setState({topBooksByList:e})}).catch(function(e){return a.setState({error:e.message})})},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.listName,a="".concat("https://api.nytimes.com/svc/books/v3/lists/current/").concat(t,"?api-key=").concat(d);fetch(a).then(k).then(function(e){return e.json()}).then(function(e){return function(e){return{display_name:e.results.display_name,books:e.results.books.map(function(e){return{rank:e.rank,primary_isbn10:e.primary_isbn10,description:e.description,title:(t=e.title,t.toLowerCase().split(" ").map(function(e){return"".concat(e[0].toUpperCase()).concat(e.slice(1))}).join(" ")),author:e.author,book_image:e.book_image,open_library_url:"",amazon_product_url:e.amazon_product_url};var t})}}(e)||e}).then(function(t){return e.getOpenLibraryUrls(t)}).catch(function(t){return e.setState({error:t})})}},{key:"render",value:function(){var e=this.state.error,t=this.state.topBooksByList.books.map(function(e){return r.a.createElement(y,{key:e.rank,rank:e.rank,title:e.title,author:e.author,description:e.description,image:e.book_image,url:""===e.open_library_url?e.amazon_product_url:e.open_library_url})});return r.a.createElement(r.a.Fragment,null,e?r.a.createElement("p",{className:"error",role:"alert"},e.message):"",""===this.state.topBooksByList.display_name?r.a.createElement("p",{className:"placeholder-text"},"Gathering books...one moment please..."):r.a.createElement("section",{className:"top-books"},r.a.createElement("h2",{className:"subhead-top-books"},this.state.topBooksByList.display_name),t))}}]),t}(r.a.Component)),_=(a(37),function(){return r.a.createElement("footer",{className:"footer"},r.a.createElement("p",{className:"footer-copy"},r.a.createElement("a",{href:"https://developer.nytimes.com"},"Data provided by The New York Times")),r.a.createElement("p",{className:"footer-copy"},r.a.createElement("a",{className:"main-a-style",href:"https://openlibrary.org/"},"Data provided by OpenLibrary")),r.a.createElement("p",{className:"footer-copy"}," \xa92019 ",r.a.createElement("a",{className:"main-a-style",href:"mailto:pulchrit@gmail.com"},"Melissa Lafranchise")))}),N=(a(38),function(e){function t(){var e,a;Object(i.a)(this,t);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(a=Object(m.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={listNames:[],error:null},a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t="https://api.nytimes.com/svc/books/v3/lists/names.json?api-key=".concat(d);fetch(t).then(k).then(function(e){return e.json()}).then(function(e){return e.results.filter(function(e){return e.display_name.includes("Children")}).map(function(e){return{display_name:e.display_name,list_name_encoded:e.list_name_encoded}})}).then(function(t){return e.setState({listNames:t})}).catch(function(t){e.setState({error:t.message})})}},{key:"render",value:function(){var e=this;return r.a.createElement("main",{className:"app"},r.a.createElement(f,null),r.a.createElement(h.a,{exact:!0,path:"/",render:function(){return r.a.createElement(b,{listNames:e.state.listNames,error:e.state.error})}}),r.a.createElement(h.a,{path:"/topBooks/:listName",component:E}),r.a.createElement(_,null))}}]),t}(r.a.Component));s.a.render(r.a.createElement(c.a,{basename:"/more-books-please"},r.a.createElement(N,null)),document.getElementById("root"))}},[[23,1,2]]]);
//# sourceMappingURL=main.07b3d75d.chunk.js.map